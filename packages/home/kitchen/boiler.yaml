boiler_package:
  automation:
    - alias: "Boiler: Stop heating up on most expensive hours"
      id: 5416039b-0d69-4501-9ba6-fef7c9e49069
      mode: queued
      trigger:
        - platform: state
          entity_id: sensor.p_deferrable0
      action:
        - if:
            - condition: numeric_state
              entity_id: sensor.p_deferrable0
              below: 1
          then:
            - service: switch.turn_off
              entity_id: switch.boiler
          else:
            - service: switch.turn_on
              entity_id: switch.boiler
    - alias: "Boiler: Briefly turn on if boiler has been off too long"
      id: 1e2cb1cb-6c85-46ae-bd31-2a3e052af63f
      mode: queued
      trigger:
        - platform: state
          entity_id: switch.boiler
          to: "off"
          for: "04:40:00"
      action:
        - service: switch.turn_on
          entity_id: switch.boiler